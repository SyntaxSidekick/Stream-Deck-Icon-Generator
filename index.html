<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Stream Deck Icon Generator</title>
    <link rel="stylesheet" href="./src/styles/base.css" />
    <link rel="stylesheet" href="./src/styles/modal.css" />
  </head>

  <body>
    <a href="#mainContent" class="skip-link">Skip to main content</a>
    <div class="wrap">
      <header class="hero">
        <div class="deck" aria-hidden="true">
          <div class="key"></div><div class="key"></div><div class="key"></div>
          <div class="key"></div><div class="key"></div><div class="key"></div>
        </div>

        <div class="title">
          <h1>Stream Deck <span>ICON GENERATOR</span></h1>
          <p>Create &amp; Export Custom Icons</p>
        </div>
      </header>

      <main class="grid" id="mainContent">
        <!-- Icon Picker (TOP LEFT) -->
        <section class="card" aria-label="Icon Picker">
          <div class="card-head">
            <div class="label">Icon Picker</div>
            <div class="icons">
              <button class="ico" type="button" id="iconPickerSettings" aria-label="Settings"></button>
              <button class="ico" type="button" id="viewModeToggle" aria-label="View mode"></button>
            </div>
          </div>
          <div class="card-body">
            <div class="search">
              <div class="dot"></div>
              <input type="search" id="quickIconSearch" placeholder="Search icons..." />
            </div>

            <div class="icon-grid" id="iconPickerGrid"></div>
          </div>
        </section>

        <!-- Preview (TOP RIGHT) -->
        <section class="card" aria-label="Preview">
          <div class="card-head">
            <div class="label">PREVIEW</div>
            <div class="icons">
              <button class="ico" type="button" aria-label="Zoom"></button>
              <button class="ico" type="button" aria-label="Options"></button>
            </div>
          </div>

          <div class="card-body">
            <div class="previewShell">
              <div class="checker"></div>
              <div class="keycap" id="canvasWrap">
                <canvas id="canvas" width="256" height="256" role="img" aria-label="Generated icon"></canvas>
              </div>
            </div>
            <div class="previewFoot">
              <div class="chipgroup" id="zoomGroup" role="group" aria-label="Zoom level">
                <button class="chip active" type="button" data-zoom="1" aria-pressed="true">1× Actual Size</button>
                <button class="chip" type="button" data-zoom="4" aria-pressed="false">4x</button>
                <button class="chip" type="button" data-zoom="8" aria-pressed="false">8x</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Gradient Editor (BOTTOM LEFT) -->
        <section class="card" aria-label="Gradient Editor">
          <div class="card-head">
            <div class="label">Gradient Editor</div>
            <div class="icons">
              <button class="ico" type="button" id="gradientTypeBtn" data-type="linear" aria-label="Gradient type"></button>
              <button class="ico" type="button" id="resetGradient" aria-label="Reset gradient"></button>
            </div>
          </div>

          <div class="card-body">
            <div class="grad-bar" id="gradBar" tabindex="0" aria-label="Gradient preview"></div>

            <div class="row">
              <div class="tiny" aria-hidden="true"></div>
              <div class="stopIndicators" id="stopIndicators"></div>
            </div>

            <div class="row">
              <label style="color:rgba(255,255,255,.65);font-size:11px;font-weight:700;width:80px;">Base Color</label>
              <input type="color" id="baseColorPicker" value="#ff0000" style="width:32px;height:28px;border-radius:6px;border:1px solid rgba(255,255,255,.12);background:transparent;cursor:pointer;" />
              <div style="display:flex;gap:6px;flex:1;flex-wrap:wrap;">
                <button class="btn-style" data-style="smooth" title="Smooth gradient">Smooth</button>
                <button class="btn-style" data-style="glossy" title="Glossy gradient">Glossy</button>
                <button class="btn-style" data-style="vibrant" title="Vibrant gradient">Vibrant</button>
                <button class="btn-style" data-style="subtle" title="Subtle gradient">Subtle</button>
              </div>
            </div>

            <div class="row" id="angleField">
              <div class="tiny" aria-hidden="true"></div>
              <div class="slider">
                <input type="range" class="range-input" id="angle" min="0" max="360" value="135" aria-label="Gradient angle" />
                <div class="knob" id="angleKnob"></div>
              </div>
              <div class="pill" id="angleValueDisplay">135°</div>
              <button class="btn small" id="randomizeGradient">Randomize</button>
            </div>

            <div class="row" id="stopColorField">
              <button class="tiny iconBtn" type="button" id="toggleStopColor" aria-label="Toggle stop color"></button>
              <input type="color" id="stopColorVisible" value="#00ff00" style="width:32px;height:28px;border-radius:6px;border:1px solid rgba(255,255,255,.12);background:transparent;cursor:pointer;" title="Stop color" />
              <div class="slider">
                <input type="range" class="range-input" id="stopPos" min="0" max="100" value="50" aria-label="Stop position" />
                <div class="knob" id="stopPosKnob"></div>
              </div>
              <div class="pill" id="stopPosValueDisplay">50%</div>
              <button class="tiny iconBtn" type="button" id="removeStop" title="Remove stop">−</button>
              <button class="tiny iconBtn" type="button" id="addStop" title="Add stop">+</button>
              <button class="tiny iconBtn" type="button" id="copyGrad" aria-label="Copy"></button>
            </div>
          </div>
        </section>

        <!-- Export Options (BOTTOM RIGHT) -->
        <section class="card" aria-label="Export Options">
          <div class="card-head">
            <div class="label">Export Options</div>
            <div class="icons">
              <button class="ico" type="button" id="exportSettings" aria-label="Settings"></button>
              <button class="ico" type="button" id="exportCollapse" aria-label="Collapse"></button>
            </div>
          </div>

          <div class="card-body">
            <div class="field">
              <label for="iconNameInput" style="color:rgba(255,255,255,.65);font-weight:800;">Icon name</label>
              <input type="text" id="iconNameInput" placeholder="angular" style="all:unset;flex:1;margin-left:10px;" />
            </div>

            <div class="checks">
              <label><input type="checkbox" id="size72" checked /> 72 px</label>
              <label><input type="checkbox" id="size144" checked /> 144 px</label>
              <label><input type="checkbox" id="size256" checked /> 256 px</label>
            </div>

            <div class="exportRow">
              <button class="btnPrimary" id="exportBtn">Export PNGs</button>
              <button class="btnBlue" id="copyToClipboard">Copy to Clipboard</button>
            </div>
          </div>
        </section>
      </main>

      <footer class="footer" aria-label="Feature summary">
        SVG Icons  <span>|</span>  Custom Gradients  <span>|</span>  Pixel Perfect Preview  <span>|</span>  Local &amp; Fast!
      </footer>
    </div>

      <!-- Hidden form fields for functionality -->
      <div style="display: none;">
        <input type="color" id="stopColor" value="#ffb347" />
        <input type="text" id="stopColorHex" value="#ffb347" />
        <input type="color" id="iconColor" value="#ffffff" />
        <input type="text" id="iconColorHex" value="#ffffff" />
        <input type="range" id="iconSize" min="20" max="80" value="44" />
        <input type="range" id="iconOffset" min="-30" max="30" value="0" />
        <input type="range" id="radius" min="0" max="28" value="18" />
        <select id="exportSize"><option value="256" selected>256</option></select>
        <select id="presetSelect"><option value="">Custom...</option></select>
        <button id="savePreset">Save</button>
        <button id="deletePreset">Delete</button>
        <button id="resetAll">Reset</button>
        <button id="batchExportBtn">Batch</button>
        <span id="previewLabel">256 × 256</span>
        <span id="radiusValue"></span>
        <span id="iconSizeValue">44%</span>
        <span id="iconOffsetValue">0%</span>
        <span id="selectedIconName">None</span>
        <span id="selectedIconHint">Choose</span>
        <div id="smallIconPreview"></div>
        <button id="openIconPicker">Open Picker</button>
      </div>
    </div>

    <!-- Modal: Icon Picker -->
    <div class="modal" data-open="false" aria-hidden="true" id="iconModal" role="dialog">
      <div class="modalOverlay" id="iconModalOverlay" aria-hidden="true"></div>

      <div
        class="modalDialog"
        role="document"
        aria-labelledby="iconModalTitle"
        aria-describedby="iconModalDescription"
      >
        <div class="modalHead">
          <h3 id="iconModalTitle">Select Icon</h3>
          <div class="row">
            <span class="kbd" aria-label="Press Escape key to close">Esc</span>
            <button class="btn small ghost" type="button" id="closeIconPicker" aria-label="Close icon picker dialog">
              Close
            </button>
          </div>
        </div>

        <div class="modalBody">
          <div class="searchRow">
            <input
              class="input"
              type="search"
              id="iconSearch"
              placeholder="Search (github, figma…)"
              style="flex: 1"
              aria-label="Search for icons by name"
              role="searchbox"
            />
            <span class="help" id="iconModalDescription" aria-live="polite"
              >Loaded from <code>public/icons/fontawesome/index.json</code></span
            >
          </div>

          <div class="iconLoadingIndicator" id="iconLoadingIndicator" style="display: none;" role="status" aria-live="polite">
            <div class="spinner" aria-hidden="true"></div>
            <span>Loading icons...</span>
          </div>

          <div class="iconGrid" id="iconGrid" role="grid" aria-label="Icon selection grid"></div>
        </div>
      </div>
    </div>

    <script type="module" src="./src/js/app.js"></script>
  </body>
</html>
