<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Stream Deck Icon Generator</title>
    <link rel="stylesheet" href="/src/styles/base.css" />
    <link rel="stylesheet" href="/src/styles/modal.css" />
  </head>

  <body>
    <a href="#mainContent" class="skip-link">Skip to main content</a>
    <div class="shell">
      <header class="topbar" role="banner">
        <div class="brand">
          <h1>Stream Deck Icon Generator</h1>
          <p>Pick an SVG, tune a gradient, export a Stream Deck-ready PNG.</p>
        </div>

        <nav class="pillrow" aria-label="Features and keyboard shortcuts">
          <div class="pill" aria-label="Feature: Local SVG icons"><span class="dot" aria-hidden="true"></span> Local SVGs</div>
          <div class="pill" aria-label="Feature: Canvas preview">Canvas Preview</div>
          <div class="pill" aria-label="Feature: PNG export">PNG Export</div>
          <div class="pill kbd" aria-label="Keyboard shortcut: Control I to open icons">Ctrl+I Open Icons</div>
          <div class="pill kbd" aria-label="Keyboard shortcut: Control E to export">Ctrl+E Export</div>
          <div class="pill kbd" aria-label="Keyboard shortcut: Arrow keys to adjust values">Arrows Adjust</div>
        </nav>
      </header>

      <main class="grid" id="mainContent">
        <!-- LEFT: Controls -->
        <section class="panel" aria-label="Icon and gradient controls">
          <div class="panelHead">
            <h2>Controls</h2>
            <button class="btn small ghost" type="button" id="resetAll" aria-label="Reset all settings to defaults">
              Reset
            </button>
          </div>

          <div class="panelBody">
            <!-- Icon -->
            <fieldset class="section" aria-labelledby="iconSectionTitle">
              <legend class="sectionTitle" id="iconSectionTitle">
                <h3>Icon</h3>
                <span aria-label="Icon type: Local SVG files">Local SVGs</span>
              </legend>

              <div class="iconPick">
                <div class="iconPreview" id="smallIconPreview" aria-label="Selected icon preview" role="img"></div>

                <div class="iconMeta">
                  <strong id="selectedIconName" aria-live="polite">None selected</strong>
                  <span id="selectedIconHint" aria-live="polite">Click "Choose Icon"</span>
                </div>

                <button class="btn" type="button" id="openIconPicker" aria-label="Open icon picker dialog" aria-haspopup="dialog">
                  Choose Icon
                </button>
              </div>

              <div class="twocol">
                <div class="field">
                  <label class="label" for="iconColor">Icon color</label>
                  <div class="row">
                    <input
                      class="color"
                      type="color"
                      id="iconColor"
                      value="#ffffff"
                      aria-label="Pick icon color"
                    />
                    <input
                      class="input"
                      type="text"
                      id="iconColorHex"
                      value="#ffffff"
                      placeholder="#ffffff"
                      aria-label="Enter icon color hex value"
                      pattern="^#[0-9A-Fa-f]{6}$"
                    />
                  </div>
                </div>
                <div class="field">
                  <label class="label" for="iconSize">Icon size <span id="iconSizeValue" aria-live="polite">44%</span></label>
                  <input
                    class="range"
                    type="range"
                    id="iconSize"
                    min="20"
                    max="80"
                    value="44"
                    aria-label="Adjust icon size percentage"
                    aria-valuemin="20"
                    aria-valuemax="80"
                    aria-valuenow="44"
                  />
                </div>
              </div>

              <div class="field">
                <label class="label" for="iconOffset">Vertical offset <span id="iconOffsetValue" aria-live="polite">0%</span></label>
                <input
                  class="range"
                  type="range"
                  id="iconOffset"
                  min="-30"
                  max="30"
                  value="0"
                  aria-label="Adjust vertical position offset"
                  aria-valuemin="-30"
                  aria-valuemax="30"
                  aria-valuenow="0"
                />
              </div>
            </fieldset>

            <!-- Background / Gradient -->
            <fieldset class="section" aria-labelledby="backgroundSectionTitle">
              <legend class="sectionTitle" id="backgroundSectionTitle">
                <h3>Background</h3>
                <span aria-label="Background type: Gradient">Gradient</span>
              </legend>

              <div class="field">
                <label class="label" for="presetSelect">Presets</label>
                <div class="row">
                  <select class="select" id="presetSelect" style="flex: 1;" aria-label="Select gradient preset">
                    <option value="">Custom...</option>
                  </select>
                  <button class="btn small ghost" type="button" id="savePreset" aria-label="Save current gradient as preset">
                    <span aria-hidden="true">üíæ</span>
                    <span class="sr-only">Save preset</span>
                  </button>
                  <button class="btn small ghost" type="button" id="deletePreset" aria-label="Delete selected preset">
                    <span aria-hidden="true">üóëÔ∏è</span>
                    <span class="sr-only">Delete preset</span>
                  </button>
                </div>
              </div>

              <div class="field">
                <span class="label" id="gradBarLabel">Gradient preview (drag stops)</span>
                <div class="gradBar" id="gradBar" role="slider" aria-labelledby="gradBarLabel" aria-label="Gradient preview with draggable color stops" tabindex="0"></div>
              </div>

              <div class="field">
                <label class="label" for="randomBaseColor">Random base color (optional)</label>
                <div class="row">
                  <input
                    class="color"
                    type="color"
                    id="randomBaseColor"
                    value="#667eea"
                    aria-label="Pick base color for randomization"
                  />
                  <input
                    class="input"
                    type="text"
                    id="randomBaseColorHex"
                    value="#667eea"
                    placeholder="#667eea"
                    aria-label="Enter base color hex value"
                    pattern="^#[0-9A-Fa-f]{6}$"
                  />
                  <button class="btn small ghost" type="button" id="clearBaseColor" aria-label="Clear base color">
                    <span aria-hidden="true">‚úï</span>
                    <span class="sr-only">Clear</span>
                  </button>
                </div>
              </div>

              <button class="btn ghost" type="button" id="randomizeGradient" style="width: 100%;" aria-label="Generate random gradient">
                <span aria-hidden="true">üé≤</span> Randomize Gradient
              </button>

              <div class="split">
                <div class="chipgroup" id="gradientType" role="group" aria-label="Gradient type">
                  <button class="chip active" type="button" data-type="linear" aria-pressed="true" aria-label="Linear gradient">
                    Linear
                  </button>
                  <button class="chip" type="button" data-type="radial" aria-pressed="false" aria-label="Radial gradient">
                    Radial
                  </button>
                </div>

                <div class="row" role="group" aria-label="Gradient stop controls">
                  <button class="btn small ghost" type="button" id="addStop" aria-label="Add gradient color stop">
                    Add stop
                  </button>
                  <button class="btn small ghost" type="button" id="removeStop" aria-label="Remove gradient color stop">
                    Remove stop
                  </button>
                </div>
              </div>

              <div class="field">
                <span class="label" id="gradientStyleLabel">Gradient style</span>
                <div class="chipgroup" id="gradientStyle" role="group" aria-labelledby="gradientStyleLabel">
                  <button class="chip" type="button" data-style="smooth" aria-pressed="false" aria-label="Smooth transition style">
                    Smooth
                  </button>
                  <button class="chip" type="button" data-style="glossy" aria-pressed="false" aria-label="Glossy highlight effect style">
                    Glossy
                  </button>
                  <button class="chip" type="button" data-style="vibrant" aria-pressed="false" aria-label="Bold vibrant colors style">
                    Vibrant
                  </button>
                  <button class="chip" type="button" data-style="subtle" aria-pressed="false" aria-label="Soft subtle blend style">
                    Subtle
                  </button>
                </div>
              </div>

              <div class="field" id="angleField">
                <label class="label" for="angle">Angle (linear only) <span id="angleValue" aria-live="polite"></span></label>
                <input
                  class="range"
                  type="range"
                  id="angle"
                  min="0"
                  max="360"
                  value="135"
                  aria-label="Gradient angle in degrees"
                  aria-valuemin="0"
                  aria-valuemax="360"
                  aria-valuenow="135"
                />
              </div>

              <div class="twocol">
                <div class="field">
                  <label class="label" for="stopColor">Active stop color</label>
                  <div class="row">
                    <input
                      class="color"
                      type="color"
                      id="stopColor"
                      value="#ffb347"
                      aria-label="Pick active gradient stop color"
                    />
                    <input
                      class="input"
                      type="text"
                      id="stopColorHex"
                      value="#ffb347"
                      aria-label="Enter active stop color hex value"
                      pattern="^#[0-9A-Fa-f]{6}$"
                    />
                  </div>
                </div>
                <div class="field">
                  <label class="label" for="stopPos">Active stop position <span id="stopPosValue" aria-live="polite"></span></label>
                  <input
                    class="range"
                    type="range"
                    id="stopPos"
                    min="0"
                    max="100"
                    value="50"
                    aria-label="Active gradient stop position percentage"
                    aria-valuemin="0"
                    aria-valuemax="100"
                    aria-valuenow="50"
                  />
                </div>
              </div>
            </fieldset>

            <!-- Export -->
            <fieldset class="section" aria-labelledby="exportSectionTitle">
              <legend class="sectionTitle" id="exportSectionTitle">
                <h3>Export</h3>
                <span aria-label="Export format: PNG">PNG</span>
              </legend>

              <div class="twocol">
                <div class="field">
                  <label class="label" for="exportSize">Size</label>
                  <select class="select" id="exportSize" aria-label="Select export size in pixels">
                    <option value="72">72 √ó 72</option>
                    <option value="144">144 √ó 144</option>
                    <option value="256" selected>256 √ó 256</option>
                  </select>
                </div>
                <div class="field">
                  <label class="label" for="radius">Corner radius <span id="radiusValue" aria-live="polite"></span></label>
                  <input
                    class="range"
                    type="range"
                    id="radius"
                    min="0"
                    max="28"
                    value="18"
                    aria-label="Adjust corner radius in pixels"
                    aria-valuemin="0"
                    aria-valuemax="28"
                    aria-valuenow="18"
                  />
                </div>
              </div>
              <div class="field">
                <label class="label" for="iconNameInput">Icon name</label>
                <input
                  class="input"
                  type="text"
                  id="iconNameInput"
                  placeholder="e.g. github-gradient"
                  aria-label="Enter icon file name"
                />
              </div>

              <button class="btn primary" type="button" id="exportBtn" aria-label="Export PNG at selected size">
                Export PNG
              </button>
              <div class="row" role="group" aria-label="Export options">
                <button class="btn ghost" type="button" id="batchExportBtn" aria-label="Export PNG at 72, 144, and 256 pixel sizes">
                  Export All Sizes
                </button>
                <button class="btn ghost small" type="button" id="copyToClipboard" aria-label="Copy icon to clipboard">
                  <span aria-hidden="true">üìã</span> Copy
                </button>
              </div>
              <p class="help" id="exportHint" aria-live="polite">
                Exports current preview as PNG. Batch exports 72, 144, and 256 sizes.
              </p>
            </fieldset>
          </div>
        </section>

        <!-- RIGHT: Preview -->
        <section class="panel" aria-label="Icon preview">
          <div class="previewWrap">
            <div class="previewHeader">
              <h2>Preview</h2>
              <div class="chipgroup" id="zoomGroup" role="group" aria-label="Zoom level">
                <button class="chip active" type="button" data-zoom="1" aria-pressed="true" aria-label="Zoom 1x actual size">
                  1√ó Actual
                </button>

                <button class="chip" type="button" data-zoom="4" aria-pressed="false" aria-label="Zoom 4x magnification">4x</button>
                <button class="chip" type="button" data-zoom="8" aria-pressed="false" aria-label="Zoom 8x magnification">8x</button>
              </div>
            </div>

            <div class="previewStage" role="img" aria-label="Icon preview canvas">
              <div class="checker">
                <div class="canvasWrap" id="canvasWrap">
                  <canvas id="canvas" width="256" height="256" role="img" aria-label="Generated icon preview"></canvas>
                </div>
              </div>
            </div>

            <div class="previewFooter">
              <span>Preview: <strong id="previewLabel" aria-live="polite">256 √ó 256</strong></span>
              <span class="kbd" aria-label="Tip: export at 256 pixels then downscale">Tip: export 256 ‚Üí downscale</span>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Modal: Icon Picker -->
    <div class="modal" data-open="false" aria-hidden="true" id="iconModal" role="dialog">
      <div class="modalOverlay" id="iconModalOverlay" aria-hidden="true"></div>

      <div
        class="modalDialog"
        role="document"
        aria-labelledby="iconModalTitle"
        aria-describedby="iconModalDescription"
      >
        <div class="modalHead">
          <h3 id="iconModalTitle">Select Icon</h3>
          <div class="row">
            <span class="kbd" aria-label="Press Escape key to close">Esc</span>
            <button class="btn small ghost" type="button" id="closeIconPicker" aria-label="Close icon picker dialog">
              Close
            </button>
          </div>
        </div>

        <div class="modalBody">
          <div class="searchRow">
            <input
              class="input"
              type="search"
              id="iconSearch"
              placeholder="Search (github, figma‚Ä¶)"
              style="flex: 1"
              aria-label="Search for icons by name"
              role="searchbox"
            />
            <span class="help" id="iconModalDescription" aria-live="polite"
              >Loaded from <code>/icons/fontawesome/index.json</code></span
            >
          </div>

          <div class="iconLoadingIndicator" id="iconLoadingIndicator" style="display: none;" role="status" aria-live="polite">
            <div class="spinner" aria-hidden="true"></div>
            <span>Loading icons...</span>
          </div>

          <div class="iconGrid" id="iconGrid" role="grid" aria-label="Icon selection grid"></div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/js/app.js"></script>
  </body>
</html>
